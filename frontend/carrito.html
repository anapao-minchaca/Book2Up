<html>
<head>
    <title>Book2 Up - Los mejores libros </title>
    <meta charset="UTF-8" />
     <link rel="stylesheet" href="css/carrito.css"> 
</head>

<body>

<nav>
    <div class="header" >
        <img src="img/logo.png"/>
    </div>
    
    <ul>
         <li><a href="libros.html">Libros</a></li>
         <li><a href="carrito.html">Carrito</a></li>
         <form action="/logout" method="POST">
        <input type="submit" name="logout" class = "button" value="Cerrar Sesion" />
        </form>
    </ul>
</nav>
<header id = "header" style="background-image: url('img/bgbooks.png');">

<table id= "table">
<tr>
    <th><h1>SKU</h1></th> 
   <th><h1>Titulo</h1></th> 
   <th><h1>Cantidad</h1></th>
   <th><h1>Subtotal</h1></th> 
</tr>

</table>


<form action="/pagar" method="POST" style= "align-self: flex-end; font-size: 150% ">
    <input type="submit" name="pagar" class = "button" value="Pagar" onclick="alerta()" />
</form>

</header>


<script>
function createCart(carts){
    // declaramos estructura dinamica 
    const tr1 = document.createElement('tr');
    const td = document.createElement('td');
    const td1 = document.createElement('td');
    const td2 = document.createElement('td');
    const td3 = document.createElement('td');

    const table = document.getElementById('table');

    td.innerHTML = carts.SKU;
    td1.innerHTML = carts.titulo;
    td2.innerHTML = carts.cantidad;
    td3.innerHTML = "$" + carts.total;

    //append de cada parte
    table.append(tr1);
    tr1.append(td);
    tr1.append(td1);
    tr1.append(td2);
    tr1.append(td3);

}

// funcion para hacer el display de los elementos del carrito
window.onload = async function mostrarCarrito() {
    const res = await fetch("http://localhost:3000/cartdata");
    const datos = await res.json();
    datos.forEach(carts => createCart(carts));
};

// mostrar alerta 
function alerta(){
    alert("Gracias por su compra");
}
</script>
</body>
</html>